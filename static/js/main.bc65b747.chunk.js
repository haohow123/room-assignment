(this["webpackJsonproom-assignment"]=this["webpackJsonproom-assignment"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(19),i=n.n(a),o=n(143),c=n(139),s=n(8),l=n(6),u=n.n(l),b=n(17),d=n.n(b),j=n(147),m=n(145),p=n(18),f=n(141),x=n(5),O=n(140),h=n(63),v=n(4),g=n(148),y=n(144),C=n(3),w=d()((function(e){var t=e.transitions.create("transform",{duration:350,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{root:{display:"block",position:"relative",overflow:"hidden",minWidth:"20px","& > *":{position:"absolute",top:0,right:0,left:0}},"slideEnter-opposite":{willChange:"transform",transform:"translateY(-100%)"},"slideEnter-reverse":{willChange:"transform",transform:"translateY(100%)"},slideEnterActive:{transform:"translateY(0%)",transition:t},slideExit:{transform:"translateY(0%)"},"slideExitActive-opposite":{willChange:"transform",transform:"translateY(100%)",transition:t},"slideExitActive-reverse":{willChange:"transform",transform:"translateY(-100%)",transition:t}}}));var E=function(e){var t=e.children,n=e.slideDirection,a=e.transKey,i=e.className,o=Object(v.a)(e,["children","slideDirection","transKey","className"]),c=w(),s={exit:c.slideExit,enterActive:c.slideEnterActive,enter:c["slideEnter-".concat(n||"opposite")],exitActive:c["slideExitActive-".concat(n||"opposite")]};return Object(C.jsx)(g.a,{className:Object(x.a)(c.root,i),childFactory:function(e){return Object(r.cloneElement)(e,{classNames:s})},children:Object(C.jsx)(y.a,Object(h.a)(Object(h.a)({mountOnEnter:!0,unmountOnExit:!0,timeout:350,classNames:s},o),{},{children:t}),a)})},N=n(146),k=n(82),S=n.n(k),A=n(83),D=n.n(A),F=d()((function(e){return{input:{width:"50px",border:"1px solid #BFBFBF",borderRadius:"4px",textAlign:"center",fontSize:"14px",MozAppearance:"textfield","&::-webkit-inner-spin-button, &::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0}},hint:{position:"absolute",lineHeight:"1rem",margin:"0"},error:{borderColor:e.palette.error.main},button:{minWidth:"40px",width:"40px",margin:"0 ".concat(e.spacing(1),"px")},buttonRoot:{"&$buttonDisabled":{cursor:"not-allowed",pointerEvents:"unset",border:"1px solid rgba(30, 159, 210, 0.5)",color:"#1E9FD2",opacity:.48}},buttonDisabled:{}}}));function M(e,t){switch(t.type){case"overMax":return"\u8d85\u904e\u6700\u5927\u503c";case"belowMin":return"\u4f4e\u65bc\u6700\u5c0f\u503c";default:return""}}var R=function(e){var t=F(),n=Object(r.useState)(!1),a=Object(s.a)(n,2),i=a[0],o=a[1],c=Object(r.useReducer)(M,""),l=Object(s.a)(c,2),u=l[0],b=l[1];return Object(r.useEffect)((function(){o(i||e.error)}),[i,e.error]),Object(r.useEffect)((function(){e.value>e.max?(b({type:"overMax"}),o(!0)):e.value<0?(b({type:"belowMin"}),o(!0)):(b({type:""}),o(!1))}),[e,o]),Object(C.jsxs)(j.a,{children:[Object(C.jsxs)(j.a,{display:"flex",children:[Object(C.jsx)(N.a,{name:"minus-value",className:Object(x.a)(t.button),variant:"outlined",color:"primary",onClick:function(){return e.onClick(e.value-e.step)},classes:{root:t.buttonRoot,disabled:t.buttonDisabled},disabled:0===e.value,children:Object(C.jsx)(S.a,{})}),Object(C.jsx)("input",{type:"text","aria-label":"number-value",className:Object(x.a)(t.input,i&&t.error),min:0,max:e.max,step:e.step,onChange:function(t){var n=Number(t.target.value);(isNaN(n)||n<0)&&(n=0),e.onChange(n)},value:e.value}),Object(C.jsx)(N.a,{name:"add-number",className:Object(x.a)(t.button),"aria-label":"add-value",variant:"outlined",color:"primary",onClick:function(){return e.onClick(e.value+e.step)},disabled:e.value+e.step>e.max,classes:{root:t.buttonRoot,disabled:t.buttonDisabled},children:Object(C.jsx)(D.a,{})})]}),Object(C.jsx)(j.a,{display:"flex",justifyContent:"center",children:i&&Object(C.jsx)(m.a,{error:!0,className:Object(x.a)(t.hint),children:u})})]})},B=d()((function(e){return{amount:{marginBottom:e.spacing(2)},subAmount:{flexGrow:1},hint:{color:"#8C8C8C"},helperText:{position:"absolute",marginTop:"-".concat(e.spacing(.5),"px")}}}));function T(e,t){switch(t.type){case"overMax":return"\u623f\u9593\u81f3\u591a".concat(t.max,"\u4eba");case"belowMin":return"\u623f\u9593\u81f3\u5c11".concat(t.min,"\u4eba");default:return""}}var I=function(e){var t=B(),n=e.room,a=e.onChange,i=Object(r.useState)(0),o=Object(s.a)(i,2),c=o[0],l=o[1],u=Object(r.useState)(0),b=Object(s.a)(u,2),d=b[0],p=b[1],f=Object(r.useState)("opposite"),h=Object(s.a)(f,2),v=h[0],g=h[1],y=Object(r.useState)(!1),w=Object(s.a)(y,2),N=w[0],k=w[1],S=Object(r.useReducer)(T,""),A=Object(s.a)(S,2),D=A[0],F=A[1],M=Object(r.useState)(!1),I=Object(s.a)(M,2),W=I[0],Y=I[1],q=Object(r.useCallback)((function(e){return"adult"===e}),[]),z=Object(r.useMemo)((function(){return[{key:"adult",text:"\u5927\u4eba",hint:"\u5e74\u9f6120+"},{key:"child",text:"\u5c0f\u5b69",hint:"\u5e74\u9f610+"}]}),[]);Object(r.useEffect)((function(){e.error&&(k(!0),Y(!0))}),[e.error,k,Y]),Object(r.useEffect)((function(){if(W){var e=c+d;e>n.max?(F({type:"overMax",max:n.max}),k(!0)):e<n.min?(F({type:"belowMin",min:n.min}),k(!0)):k(!1)}}),[F,c,d,W,k,n]);var H=Object(r.useCallback)((function(e,t){g(e>t?"reverse":"opposite")}),[g]),J=function(e,t){W||Y(!0);var n=Object.assign({},{adult:c,child:d});q(e)?(l((function(e){return H(e,t),t})),n.adult=t):(p((function(e){return H(e,t),t})),n.child=t),a(n)};return Object(C.jsxs)(r.Fragment,{children:[Object(C.jsxs)(O.a,{component:"div",variant:"body1",className:Object(x.a)(t.amount),align:"left",children:[Object(C.jsxs)(j.a,{display:"flex",children:[Object(C.jsx)("span",{children:"\u623f\u9593\uff1a"}),Object(C.jsx)(E,{transKey:c+d,slideDirection:v,children:Object(C.jsx)(j.a,{textAlign:"center",children:c+d})}),Object(C.jsx)(j.a,{marginLeft:.25,children:"\u4eba"})]}),N&&Object(C.jsx)(m.a,{error:!0,className:Object(x.a)(t.helperText),children:D})]}),z.map((function(e){var r=e.key,a=e.text,i=e.hint;return Object(C.jsxs)(j.a,{component:"div",display:"flex",marginBottom:2,children:[Object(C.jsxs)(O.a,{component:"div",align:"left",variant:"body2",className:Object(x.a)(t.subAmount),children:[Object(C.jsx)(j.a,{children:a}),Object(C.jsx)(j.a,{fontWeight:400,className:Object(x.a)(t.hint),children:i})]}),Object(C.jsx)(R,{name:"".concat(n.roomId,"-").concat(r),value:q(r)?c:d,min:n.min,max:n.max,step:1,onClick:function(e){return J(r,e)},onBlur:function(e){return J(r,e)},onChange:function(e){return J(r,e)},error:N})]},r)}))]})},W=d()((function(e){return{divider:{margin:"".concat(e.spacing(2),"px 0")}}}));var Y=function(e){var t=W(),n=e.rooms,a=e.handleDistribution,i=Object(r.useState)([]),o=Object(s.a)(i,2),c=o[0],l=o[1],u=Object(r.useState)(!1),b=Object(s.a)(u,2),d=b[0],j=b[1];Object(r.useEffect)((function(){l(n.map((function(){return{adult:0,child:0}})))}),[n,l]);var m=Object(r.useCallback)((function(e,t){var n;d||j(!0);var r=(n=[]).concat.apply(n,Object(p.a)(c));r[e]=t,l(r)}),[c,l,d,j]);return Object(r.useEffect)((function(){d&&a(c)}),[c,a,d]),Object(C.jsx)(r.Fragment,{children:n.map((function(n,a){return Object(C.jsxs)(r.Fragment,{children:[!!a&&Object(C.jsx)(f.a,{className:t.divider}),Object(C.jsx)(I,{room:n,onChange:function(e){return m(a,e)},error:e.error})]},n.roomId)}))})},q=n(142),z=Object(q.a)((function(e){return{title:{fontWeight:700,fontSize:"20px",lineHeight:"28px",marginBottom:e.spacing(2)}}}));var H=function(e){var t=e.people,n=e.roomsAmount,r=z();return Object(C.jsxs)(O.a,{component:"h4",variant:"h4",align:"left",className:r.title,children:["\u4f4f\u5ba2\u4eba\u6578\uff1a",t," \u4eba / ",n," \u623f"]})},J=d()((function(e){return{root:{textAlign:"center",backgroundColor:"#e5e5e5",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"calc(10px + 2vmin)"},helperText:{position:"absolute",marginTop:e.spacing(-2)}}}));function K(e,t){switch(t.type){case"overMax":return"\u8d85\u904e\u8a02\u623f\u4eba\u6578";case"belowMin":return"\u5c11\u65bc\u8a02\u623f\u4eba\u6578";default:return""}}function L(e){var t=e.rooms,n=e.people,a=J(),i=Object(r.useState)(!1),o=Object(s.a)(i,2),c=o[0],l=o[1],u=Object(r.useReducer)(K,""),b=Object(s.a)(u,2),d=b[0],p=b[1],f=Object(r.useState)(!1),O=Object(s.a)(f,2),h=O[0],v=O[1],g=Object(r.useCallback)((function(e){var r=!1;return e.reduce((function(e,t){return e+t.adult+t.child}),0)===n&&(r=!0),r&&e.forEach((function(e,n){var a=e.adult+e.child;if(!(t[n].max>a||t[n].min<a))return r=!1;r=!0})),r}),[t,n]),y=Object(r.useCallback)((function(e){if(h||v(!0),g(e))p({type:""}),console.log("toBackendData",JSON.stringify(e));else{l(!0);var t=e.reduce((function(e,t){return e+t.adult+t.child}),0);h&&p(t>n?{type:"overMax"}:{type:"belowMin"})}}),[g,l,n,v,h]);return Object(C.jsx)("div",{className:a.root,children:Object(C.jsxs)(j.a,{width:375,height:381,bgcolor:"white",borderRadius:4,boxShadow:1,p:2,children:[Object(C.jsx)(H,{people:n,roomsAmount:t.length}),c&&Object(C.jsx)(m.a,{error:!0,className:Object(x.a)(a.helperText),children:d}),Object(C.jsx)(Y,{rooms:t,handleDistribution:y,error:c})]})})}L.prototype={people:u.a.number.isRequired,rooms:u.a.arrayOf(u.a.shape({roomId:u.a.string.isRequired,min:u.a.number.isRequired,max:u.a.number.isRequired})).isRequired};var P=L,G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,149)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))},$=n(56),Q=n(84),U=Object(Q.a)({typography:{fontFamily:["Noto Sans TC","Noto Sans"].join(","),body1:{fontWeight:500}},palette:{primary:{main:"#1E9FD2"},error:{main:$.a.A400},background:{default:"#fff"}}});i.a.render(Object(C.jsxs)(c.a,{theme:U,children:[Object(C.jsx)(o.a,{}),Object(C.jsx)(P,{people:4,rooms:[{roomId:"202101",min:1,max:4},{roomId:"202102",min:0,max:4}]})]}),document.getElementById("root")),G()}},[[125,1,2]]]);
//# sourceMappingURL=main.bc65b747.chunk.js.map